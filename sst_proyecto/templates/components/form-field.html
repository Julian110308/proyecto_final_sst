{# Form Field Component - Campo de formulario unificado #}
{% comment %}
Uso:
{% include 'components/form-field.html' with
    field_id="nombre"
    name="nombre"
    label="Nombre Completo"
    type="text"
    placeholder="Ingrese su nombre"
    required=True
    icon_left="bi bi-person"
    help_text="Ingrese su nombre como aparece en el documento"
    error=form.nombre.errors.0
    value=form.nombre.value
%}

Para select:
{% include 'components/form-field.html' with
    field_id="rol"
    name="rol"
    label="Rol"
    type="select"
    required=True
    options=roles_list
%}

Para textarea:
{% include 'components/form-field.html' with
    field_id="descripcion"
    name="descripcion"
    label="Descripci√≥n"
    type="textarea"
    rows=5
%}
{% endcomment %}

<div class="mb-4">
    <label for="{{ field_id }}" class="form-label">
        {{ label }}
        {% if required %}<span class="text-danger">*</span>{% endif %}
    </label>

    {% if type == 'textarea' %}
        <textarea
            class="form-control {% if error %}is-invalid{% endif %}"
            id="{{ field_id }}"
            name="{{ name }}"
            rows="{{ rows|default:3 }}"
            {% if required %}required{% endif %}
            {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
        >{{ value|default:'' }}</textarea>

    {% elif type == 'select' %}
        <select
            class="form-select {% if error %}is-invalid{% endif %}"
            id="{{ field_id }}"
            name="{{ name }}"
            {% if required %}required{% endif %}
        >
            <option value="">{{ placeholder|default:'Seleccione...' }}</option>
            {% for option in options %}
                <option value="{{ option.value }}" {% if option.value == value %}selected{% endif %}>
                    {{ option.label }}
                </option>
            {% endfor %}
        </select>

    {% else %}
        <div class="input-group">
            {% if icon_left %}
            <span class="input-group-text">
                <i class="{{ icon_left }}"></i>
            </span>
            {% endif %}
            <input
                type="{{ type|default:'text' }}"
                class="form-control {% if error %}is-invalid{% endif %}"
                id="{{ field_id }}"
                name="{{ name }}"
                value="{{ value|default:'' }}"
                {% if required %}required{% endif %}
                {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
                {% if minlength %}minlength="{{ minlength }}"{% endif %}
                {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
                {% if pattern %}pattern="{{ pattern }}"{% endif %}
            >
            {% if icon_right %}
            <span class="input-group-text">
                <i class="{{ icon_right }}"></i>
            </span>
            {% endif %}
        </div>
    {% endif %}

    {% if help_text %}
    <small class="form-text text-muted d-block mt-1">{{ help_text }}</small>
    {% endif %}

    {% if error %}
    <div class="invalid-feedback d-block">{{ error }}</div>
    {% endif %}
</div>
